# IoC(Inversion Of Controll) 과 DI(Dependency Injection)란?

### IoC(제어의 역전)
**프로그램의 제어 흐름**을 직접 제어하는 것이 아니라 외부에서 관리하는 것입니다.

### DI(의존관계 주입)
Spring 프레임워크에서 지원하는 **IoC의 형태**로 **클래스 사이의 의존관계**를 **빈 설정 정보를 바탕**으로 **컨테이너가 자동으로 연결**해주는 것 입니다.

# 어떻게 동작하는가?
스프링에서는 스프링 컨테이너인 **ApplicationContext**에 설정 정보를 생성, 등록하고 필요한 객체를 **주입(DI)** 하여 사용합니다.  
**코드의 최종 호출**은 **개발자가 제어하는 것이 아닌 프레임워크의 내부에서 결정**된 대로 이루어집니다.

# IoC 컨테이너의 역할?
애플리케이션 실행 시점에 Bean 오브젝트를 인스턴스화 하고 DI한 후 최초로 애플리케이션을 기동할 Bean 하나를 제공해줍니다.

# DI 종류는 어떤 것이 있고, 이들의 차이는 ?
- 생성자 주입
  - 생성자를 통해 의존 관계를 주입 받는 방법입니다.
  - 생성자 호출시점에 딱 1번만 호출되는 것이 보장됩니다.
  - **불변,필수** 의존관계에 사용됩니다.
  - 생성자가 단 1개만 있다면 **@Autowired**를 생략해도 자동 주입 됩니다.

- 수정자 주입(setter 주입)
  - setter 라 불리는 필드의 값을 변경하는 수정자 메서드를 통해서 의존관계를 주입하는 방법입니다.
  - **선택, 변경** 가능성이 있는 의존 관계에 사용됩니다.

- 필드 주입
  - 필드에서 바로 주입하는 방법입니다.
  - 코드가 간결해서 편리하지만 외부에서 변경이 불가능해서 테스트하기 힘들다는 단점이 있습니다.
  - DI 프레임워크가 없으면 아무것도 할 수 없습니다.
  - 권장 X.
    - 애플리케이션의 실제 코드와 관계 없는 테스트 코드
    - 스프링 설정을 목적으로 하는 @Configuration 같은 곳에서만 특별한 용도로 사용됩니다.
    - DI 컨테이너와 결합이 매우 강하게 되어 있어 외부에서 사용하기 어렵습니다.
    - 외존 관계가 보이지 않아 순환 참조의 오류를 발견하기 어렵습니다.

- 결론
  - **생성자 주입을 선택하자!**
    - 대부분의 의존 관계 주입은 한번 일어나면 애플리케이션 종료 시점까지 불변해야 합니다.
    - 수정자 주입을 사용하면, setXxx 메서드를 public 으로 열어 두어야 합니다.
      - 누군가 실수로 변경할 수 도 있고, 변경해서는 안되는 메서드를 열어두는 것은 좋은 설계가 아닙니다.
    - 생성자 주입은 객체를 생성할 때 딱 1번만 호출되므로 불변하게 설계할 수 있습니다.
    - 프레임워크에 의존하지 않고, 순수한 자바 언어의 특징을 잘 살리는 방법입니다.
    - 항상 생성자 주입을 선택하고, 가끔 옵션이 필요하다면 수정자 주입을 선택합니다. 필드 주입은 사용하지 않는게 좋습니다.
